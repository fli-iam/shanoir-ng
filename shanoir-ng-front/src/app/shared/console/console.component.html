<!--
Shanoir NG - Import, manage and share neuroimaging data
Copyright (C) 2009-2019 Inria - https://www.inria.fr/
Contact us on https://project.inria.fr/shanoir/

This program is free software: you can redistribute it and/or modify
it under the terms of the GNU General Public License as published by
the Free Software Foundation, either version 3 of the License, or
(at your option) any later version.

You should have received a copy of the GNU General Public License
along with this program. If not, see https://www.gnu.org/licenses/gpl-3.0.html
-->

<div class="button button-top">
    <div class="tab" (click)="open = !open" title="open console">
        @if (!open) {
            <i class="fa-solid fa-chevron-up"></i>
        }
        @if (open) {
            <i class="fa-solid fa-chevron-down"></i>
        }
    </div>
</div>
@if (contentOpen) {
    <div class="content">
        <div class="right-tab">
            @if (!deployed) {
                <i class="fa-solid fa-chevron-right" (click)="toggleDeployed(true)"></i>
            }
            @if (deployed) {
                <i class="fa-solid fa-chevron-left" (click)="toggleDeployed(false)"></i>
            }
        </div>
        @for (msg of messages; track msg) {
            <div [class]="msg.type" [class.fresh]="msg.fresh">
                @if (msg.type == "info") {
                    <i class="fas fa-check-circle"></i>
                }
                @if (msg.type == "warn") {
                    <i class="fas fa-exclamation-circle"></i>
                }
                @if (msg.type == "error") {
                    <i class="fas fa-times-circle"></i>
                }
                {{ msg.txt }}
                @if (msg.nb > 1) {
                    <span class="number">x{{ msg.nb }}</span>
                }
                @if (msg.details) {
                    <span (click)="toggleDetails(msg)" class="details-button">
                        <i class="fas fa-info"></i>
                    </span>
                }
                @if (msg.detailsOpened) {
                    <span class="details">
                        <ul>
                            @for (det of msg.details; track det) {
                                <li>{{ det }}</li>
                            }
                        </ul>
                    </span>
                }
            </div>
        }
    </div>
}
