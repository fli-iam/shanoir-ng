<!--
Shanoir NG - Import, manage and share neuroimaging data
Copyright (C) 2009-2019 Inria - https://www.inria.fr/
Contact us on https://project.inria.fr/shanoir/

This program is free software: you can redistribute it and/or modify
it under the terms of the GNU General Public License as published by
the Free Software Foundation, either version 3 of the License, or
(at your option) any later version.

You should have received a copy of the GNU General Public License
along with this program. If not, see https://www.gnu.org/licenses/gpl-3.0.html
-->

<div class="content-component">
    <form [formGroup]="uploadExtraDataForm" class="max-content" novalidate>
		<div class="layout">
			<fieldset>
				<ol>
                    <li class="required">
                        <label i18n="uploadExtraData| Explication label@@uploadExtraDataExplication" class="required-label">You can attach extra data to existing examinations. To do this, you can upload as many files as you wish of any type, and select in the next step the examination to which they are associated. 
							</label> 
							<div class="form-group">
									<label for="file">Choose File</label>
									<input type="file"
										   id="file"
										   name="file"
										   (change)="handleFileInput($event.target.files)" >
							</div>
					</li>
					<li class="required">
						    <label i18n="uploadExtraData|research study label@@uploadExtraDataResearchStudy" class="required-label">Select an existing research study 
								</label>
								<select id="studyId" required formControlName="studyId" [(ngModel)]="examinationStudyId">
										<option *ngFor="let study of studies" [ngValue]="study.id">{{study.name}}</option>
									</select> 
					</li>
					<li class="required">
						    <label i18n="uploadExtraData|subject label@@uploadExtraDataSubject" class="required-label">Select a subject 
								</label> 
					</li>
					<li class="required">
						    <label i18n="uploadExtraData|examination label@@uploadExtraDataExamination" class="required-label">Select an examination
								</label> 
							<input type="text" id="examination" formControlName="examination" [(ngModel)]="examination.id" />
					</li>
				</ol>
			</fieldset>
			<div class="footer command-zone">
				<span [ngSwitch]="mode">
					<button i18n="uploadExtraData detail|Back button label@@backButton" class="Button" (click)="back()">Back</button>	
					<button i18n="uploadExtraData detail|Cancel button label@@cancelButton" class="Button" (click)="back()">Cancel</button>
					<button i18n="uploadExtraData detail|Cancel button label@@cancelButton" class="Button" (click)="add()">Add</button>
					<ng-template [ngSwitchCase]="'view'" *ngIf="canModify"> 
						<button type="submit" i18n="uploadExtraData detail|Edit button label@@editButton" (click)="edit()" class="Button">Edit</button>
					</ng-template>
					<ng-template [ngSwitchCase]="'edit'" *ngIf="canModify"> 
						<button type="submit" i18n="uploadExtraData detail|Update button label@@updateButton" (click)="update()" class="Button" [disabled]="!uploadExtraDataForm.valid">Update<i class="far fa-save"></i></button>
					</ng-template>
					<ng-template [ngSwitchCase]="'create'" *ngIf="canModify"> 
						<button type="submit" i18n="uploadExtraData detail|Create button label@@createButton" (click)="create()" class="Button" [disabled]="!uploadExtraDataForm.valid">Create<i class="far fa-save"></i></button>
					</ng-template>
				</span>
			</div>
        </div>
    </form>
</div>
