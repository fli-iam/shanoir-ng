<!--
Shanoir NG - Import, manage and share neuroimaging data
Copyright (C) 2009-2019 Inria - https://www.inria.fr/
Contact us on https://project.inria.fr/shanoir/

This program is free software: you can redistribute it and/or modify
it under the terms of the GNU General Public License as published by
the Free Software Foundation, either version 3 of the License, or
(at your option) any later version.

You should have received a copy of the GNU General Public License
along with this program. If not, see https://www.gnu.org/licenses/gpl-3.0.html
-->

<div class="welcome-component">
	<div class="header">
		<img class="github-logo" title="Shanoir on GitHub" [src]="githubLogoUrl" (click)="toGithub()" alt="Shanoir on GitHub"/>
		<div class="buttons">
			<button class="left-icon alt" type="button" (click)="login()"><i class="fa-solid fa-right-to-bracket"></i>Sign in</button>
			<button class="left-icon" type="button" (click)="toShanoir()"><i class="fa-solid fa-circle-info"></i>More info</button>
			<a href="mailto:developers_shanoir@inria.fr">
				<button class="left-icon" type="button"><i class="fa-solid fa-paper-plane"></i>Contact</button>
			</a>
		</div>
	</div>
	<div class="shanoir">
		<img class="shanoir-logo" [src]="shanoirLogoUrl" alt="Shanoir logo"/>
		<div class="shanoir-text">
			SHAring iN vivO Imaging Resources
		</div>
	</div>
    <div class="stats">
        This instance of Shanoir has {{ usersCount }} active users. {{ eventsCount }} queries were made during the last month.<br>
        It has {{ studiesCount }} data collections containing {{ datasetAcquisitionsCount }} imaging datasets of {{ subjectsCount }} subjects.<br> 
        {{ publicStudies?.length }} data collections are public and detailed below.
    </div>
    <div class="study-tab-parent">
        <div *ngIf="publicStudies?.length > 0" class="study-tab">
            <div class="studyItem" *ngFor="let study of publicStudies | slice:0:show; let index = index;">
                <div class="title link" (click)="accessRequest(study)">
                    <span class="studyTitle"><b>{{study.name}}</b></span>
                    <span *ngIf="study.description" class="studyDescription">
                        <span class="spacer"></span>{{ study.description }}
                    </span>
                </div>
                <div class="details">
                    <div class="dates">
                        <span *ngIf="study.startDate" class="studyStartDate">
                            <span class="label">Start date : </span>{{ study.startDate }}
                        </span>
                        <span *ngIf="study.startDate && study.endDate" class="studyStartDate">
                            <span class="spacer"></span>
                        </span>
                        <span *ngIf="study.endDate" class="studyStartDate">
                            <span class="label">End date : </span>{{ study.endDate }}
                        </span>
                    </div>
                    <div class="status">
                        <span class="label">id : </span>{{ study.id }}
                        <span class="spacer"></span>
                        <span class="label">Status : </span>{{study.studyStatus.replace('_', ' ') | titlecase }}
                    </div>
                    <div class="studyValues">
                        <span class="label">Examinations : </span>{{ study.nbExaminations }}
                        <span class="spacer"></span>
                        <span class="label">Subjects : </span>{{ study.nbSubjects }}
                        <span *ngIf="study.studyType">
                            <span class="spacer"></span>
                            Study type: {{ StudyType[study.studyType] }}
                        </span>
                    </div>
                </div>
                <div class="tags" *ngIf="study.studyTags">
                    <div>
                        <span class="tag" [style.border-color]="tag.color" *ngFor="let tag of study.studyTags"> {{ tag.name }}</span>
                    </div>
                </div>
                <hr *ngIf="index < (publicStudies.length - 1)" />
                <div class="accessRequest">
                    <a class="buttonItem" type="button" (click)="accessRequest(study)">Request an access</a>
                </div>
            </div>
            <div *ngIf="publicStudies.length > show" class="showMoreButton" #showMore><i class="fa fa-cog fa-spin"></i></div>
        </div>
    </div>
</div>
