<!--
Shanoir NG - Import, manage and share neuroimaging data
Copyright (C) 2009-2019 Inria - https://www.inria.fr/
Contact us on https://project.inria.fr/shanoir/

This program is free software: you can redistribute it and/or modify
it under the terms of the GNU General Public License as published by
the Free Software Foundation, either version 3 of the License, or
(at your option) any later version.

You should have received a copy of the GNU General Public License
along with this program. If not, see https://www.gnu.org/licenses/gpl-3.0.html
-->

<div class="title">
    {{label}}
    <span *ngIf="!open" class="colapse" (click)="open = true"><i class="fas fa-chevron-down"></i></span>
    <span *ngIf="open" class="colapse" (click)="open = false"><i class="fas fa-chevron-up"></i></span>
</div>
<div *ngIf="open" @slideDown class="content">
    <div>
        <div class="filter-frame">
            <input [(ngModel)]="filterText" (ngModelChange)="onFilterChange()" class="filter" placeholder="filter..." />
            <span class="left-icon clickable clear" (click)="clearFilter()"><i class="fas fa-times"></i>clear</span>
        </div>
    </div>
    <div [class.non-visible]="!hasChecked" (click)="clearSelection()" class="clear-selection left-icon clickable"><i class="fas fa-times"></i>clear selection</div>
    <ul *ngIf="loaded && selectedFacets" class="selected-list">
        <li *ngFor="let item of selectedFacets">
            <checkbox [(ngModel)]="item.checked" (ngModelChange)="onCheckChange()"></checkbox>
            <span class="facet" [title]="item.value">{{item.value}}</span><span class="facet-count" *ngIf="item.valueCount > 0">{{item.valueCount}}</span>
        </li>
    </ul>
    <ul *ngIf="loaded" class="min-list">
        <ng-container *ngFor="let item of displayedFacets">
            <li *ngIf="!item.hidden">
                <checkbox [(ngModel)]="item.checked" (ngModelChange)="onCheckChange()"></checkbox>
                <span class="facet" [title]="item.value">{{item.value}}</span><span class="facet-count" *ngIf="item.valueCount > 0">{{item.valueCount}}</span>
            </li>
        </ng-container>
    </ul>
    <div *ngIf="expandable && !expanded" (click)="expand()" class="clickable more">+ more ...</div>
    <div *ngIf="displayedFacets.length > minSize && expanded" (click)="shrink()" class="clickable left-icon less"><i class="fas fa-caret-up"></i>hide</div>
    <div *ngIf="loaded" class="count">
        <span *ngIf="filteredCount != null" class="filtered">filtered : {{filteredCount}}</span>
        <span class="total">total : {{allFacetPage.content.length}}</span>
    </div>
</div>