<!--
Shanoir NG - Import, manage and share neuroimaging data
Copyright (C) 2009-2019 Inria - https://www.inria.fr/
Contact us on https://project.inria.fr/shanoir/

This program is free software: you can redistribute it and/or modify
it under the terms of the GNU General Public License as published by
the Free Software Foundation, either version 3 of the License, or
(at your option) any later version.

You should have received a copy of the GNU General Public License
along with this program. If not, see https://www.gnu.org/licenses/gpl-3.0.html
-->

<fieldset *ngIf="info && form" [formGroup]="form">
    <ol>
        <li>
            <label i18n="Edit user|Institution label@@editUserInstitution" [class.required-label]="editMode">Institution</label> 
            <span class="right-col">
                <ng-container *ngIf="editMode">
                    <input type="text" formControlName="institution" [(ngModel)]="info.institution" (change)="onInfoChange()"/>
                    <label *ngIf="hasError('institution', ['required'])" class="form-validation-alert" i18n="Edit user|Institution required error@@editUserInstitutionRequiredError">Institution is required!</label>
                    <label *ngIf="hasError('institution', ['length'])" class="form-validation-alert" i18n="Edit user|Institution length error@@editUserInstitutionLengthError">Institution length must be less than 200!</label>
                </ng-container>
                <span *ngIf="!editMode">{{info.institution}}</span>
            </span>
        </li>
        <li>
            <label i18n="Edit user|Service label@@editUserService" [class.required-label]="editMode">Service</label> 
            <span class="right-col">
                <ng-container *ngIf="editMode">
                    <input type="text" formControlName="service" [(ngModel)]="info.service" (change)="onInfoChange()"/>
                    <label *ngIf="hasError('service', ['required'])" class="form-validation-alert" i18n="Edit user|Service required error@@editUserServiceRequiredError">Service is required!</label>
                    <label *ngIf="hasError('service', ['length'])" class="form-validation-alert" i18n="Edit user|Service length error@@editUserServiceLengthError">Service length must be less than 200!</label>
                </ng-container>
                <span *ngIf="!editMode">{{info.service}}</span>
            </span>
        </li>
        <li *ngIf="!isChallenge && !info.challenge">
            <label i18n="Edit user|Function label@@editUserFunction" [class.required-label]="editMode">Function</label> 
            <span class="right-col">
                <ng-container *ngIf="editMode">
                    <input type="text" formControlName="function" [(ngModel)]="info.function" (change)="onInfoChange()"/>
                    <label *ngIf="hasError('function', ['required'])" class="form-validation-alert" i18n="Edit user|Function required error@@editUserFunctionRequiredError">Function is required!</label>
                    <label *ngIf="hasError('function', ['length'])" class="form-validation-alert" i18n="Edit user|Function length error@@editUserFunctionLengthError">Function length must be less than 200!</label>
                </ng-container>
                <span *ngIf="!editMode">{{info.function}}</span>
            </span>
        </li>
        <li *ngIf="!isChallenge && !info.challenge">
            <label i18n="Edit user|Study label@@editUserStudy" [class.required-label]="editMode">Concerned study</label> 
            <span class="right-col">
                <ng-container *ngIf="editMode">
                    <input type="text" formControlName="study" [(ngModel)]="info.study" (change)="onInfoChange()"/>
                    <label *ngIf="hasError('study', ['required'])" class="form-validation-alert" i18n="Edit user|Study required error@@editUserStudyRequiredError">Study is required!</label>
                    <label *ngIf="hasError('study', ['length'])" class="form-validation-alert" i18n="Edit user|Study length error@@editUserStudyLengthError">Study length must be less than 200!</label>
                </ng-container>
                <span *ngIf="!editMode">{{info.study}}</span>
            </span>
        </li>
        <li *ngIf="isChallenge || info.challenge">
            <label i18n="Edit user|Study label@@editUserStudy" [class.required-label]="editMode">Concerned challenge</label> 
            <span class="right-col">
                <ng-container *ngIf="editMode">
                    <select-box 
                        formControlName="challenge"
                        [(ngModel)]="info.challenge" 
                        [options]="challengeOptions"
                        (change)="onInfoChange()">
                    </select-box>
                    <label *ngIf="hasError('challenge', ['required'])" class="form-validation-alert" i18n="Edit user|Study required error@@editUserStudyRequiredError">Challenge is required!</label>
                </ng-container>
                <span *ngIf="!editMode">{{challengeName}}</span>
            </span>
        </li>
        <li *ngIf="!isChallenge && !info.challenge">
            <label i18n="Edit user|Contact label@@editUserContact" [class.required-label]="editMode">My contact in Shanoir</label> 
            <span class="right-col">
                <ng-container *ngIf="editMode">
                    <input type="text" formControlName="contact" [(ngModel)]="info.contact"  (change)="onInfoChange()"/>
                    <label *ngIf="hasError('contact', ['required'])" class="form-validation-alert" i18n="Edit user|Contact required error@@editUserContactRequiredError">Contact is required!</label>
                    <label *ngIf="hasError('contact', ['length'])" class="form-validation-alert" i18n="Edit user|Contact length error@@editUserContactLengthError">Contact length must be less than 200!</label>
                </ng-container>
                <span *ngIf="!editMode">{{info.contact}}</span>
            </span>
        </li>
        <li *ngIf="!isChallenge  && !info.challenge">
            <label i18n="Edit user|Work label@@editUserWork" [class.required-label]="editMode">Role in the study</label> 
            <span class="right-col">
                <ng-container *ngIf="editMode">
                    <input type="text" formControlName="work" [(ngModel)]="info.work" (change)="onInfoChange()"/>
                    <label *ngIf="hasError('work', ['required'])" class="form-validation-alert" i18n="Edit user|Work required error@@editUserWorkRequiredError">Work is required!</label>
                    <label *ngIf="hasError('work', ['length'])" class="form-validation-alert" i18n="Edit user|Work length error@@editUserWorkLengthError">Work length must be less than 200!</label>
                </ng-container>
                <span *ngIf="!editMode">{{info.work}}</span>
            </span>
        </li>
    </ol>
</fieldset>