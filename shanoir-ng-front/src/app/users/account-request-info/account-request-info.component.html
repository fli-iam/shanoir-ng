<!--
Shanoir NG - Import, manage and share neuroimaging data
Copyright (C) 2009-2019 Inria - https://www.inria.fr/
Contact us on https://project.inria.fr/shanoir/

This program is free software: you can redistribute it and/or modify
it under the terms of the GNU General Public License as published by
the Free Software Foundation, either version 3 of the License, or
(at your option) any later version.

You should have received a copy of the GNU General Public License
along with this program. If not, see https://www.gnu.org/licenses/gpl-3.0.html
-->

@if (info && form) {
    <ol [formGroup]="form">
        @if (!presetStudyId) {
            <li>
                @if (editMode) {
                    <label i18n="Edit user|Study label@@editUserStudy" [class.required-label]="editMode">
                        List of available studies
                    </label>
                }
                <span class="right-col">
                    @if (editMode) {
                        <select-box
                            formControlName="studyId"
                            [options]="studyOptions"
                            (change)="onStudyChange($event)"></select-box>
                        @if (hasError("studyId", ["required"])) {
                            <label
                                animate.enter="slide-down-error" animate.leave="slide-up-error"
                                class="form-validation-alert"
                                i18n="Edit user|Study required error@@editUserStudyRequiredError">
                                Study is required!
                            </label>
                        }
                    }
                    <input type="hidden" formControlName="studyName" />
                    @if (!editMode) {
                        <span>{{ info.studyName }}</span>
                    }
                </span>
            </li>
        }
        @if (presetStudyId) {
            <li class="hidden">
                <input type="hidden" formControlName="studyId" />
                <input type="hidden" formControlName="studyName" />
            </li>
        }
        <li>
            <label i18n="Edit user|Institution label@@editUserInstitution" [class.required-label]="editMode">
                Institution / Employer
            </label>
            <span class="right-col">
                @if (editMode) {
                    <input
                        type="text"
                        formControlName="institution"
                        (change)="onInstitutionChange($event.target.value)" />
                    @if (hasError("institution", ["required"])) {
                        <label
                            animate.enter="slide-down-error" animate.leave="slide-up-error"
                            class="form-validation-alert"
                            i18n="Edit user|Institution required error@@editUserInstitutionRequiredError">
                            Institution is required!
                        </label>
                    }
                    @if (hasError("institution", ["length"])) {
                        <label
                            animate.enter="slide-down-error" animate.leave="slide-up-error"
                            class="form-validation-alert"
                            i18n="Edit user|Institution length error@@editUserInstitutionLengthError">
                            Institution length must be less than 200!
                        </label>
                    }
                }
                @if (!editMode) {
                    <span>{{ info.institution }}</span>
                }
            </span>
        </li>
        @if (!editMode && info.function) {
            <li>
                <label i18n="Edit user|Function label@@editUserFunction" [class.required-label]="editMode">
                    Function in the study
                </label>
                <span class="right-col">
                    <span>{{ info.function }}</span>
                </span>
            </li>
        }
        @if (!editMode && info.contact) {
            <li>
                <label i18n="Edit user|Contact label@@editUserContact">Invitation issuer</label>
                <span class="right-col">
                    <span>{{ info.contact }}</span>
                </span>
            </li>
        }
    </ol>
}
