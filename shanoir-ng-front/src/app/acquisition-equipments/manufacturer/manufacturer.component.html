<!--
Shanoir NG - Import, manage and share neuroimaging data
Copyright (C) 2009-2019 Inria - https://www.inria.fr/
Contact us on https://project.inria.fr/shanoir/

This program is free software: you can redistribute it and/or modify
it under the terms of the GNU General Public License as published by
the Free Software Foundation, either version 3 of the License, or
(at your option) any later version.

You should have received a copy of the GNU General Public License
along with this program. If not, see https://www.gnu.org/licenses/gpl-3.0.html
-->

<div #formContainer class="content-component">
    @if (form) {
        <form #formContainer [formGroup]="form" class="max-content" novalidate [class.disabled]="footerState.loading">
            <div class="layout">
                <form-footer
                    [state]="footerState"
                    (save)="save()"
                    (delete)="delete()"
                    (edit)="goToEdit()"
                    (dismiss)="goToView()"
                    (back)="goBack()"></form-footer>
                <span>
                    @switch (mode) {
                        @case ("view") {
                            <h2 class="header command-zone" i18n="View manuf|Title@@manufDetailViewTitle">
                                Details on manufacturer
                            </h2>
                        }
                        @case ("edit") {
                            <h2 class="header command-zone" i18n="Edit manuf|Title@@manufDetailEditTitle">
                                Edit manufacturer
                            </h2>
                        }
                        @case ("create") {
                            <h2 class="header command-zone" i18n="Create manuf|Title@@manufDetailCreateTitle">
                                Create manufacturer
                            </h2>
                        }
                    }
                </span>
                <help-message [help]="'equipment'"></help-message>
                <fieldset>
                    <ol>
                        <li>
                            <label i18n="Manuf detail|Name label@@manufDetailName">Manufacturer name</label>
                            <span class="right-col">
                                @switch (mode) {
                                    @case ("view") {
                                        {{ manuf.name }}
                                    }
                                    @default {
                                        <input
                                            type="text"
                                            id="name"
                                            formControlName="name"
                                            (change)="isNameUniqueError = false" />
                                        @if (hasError("name", ["required"])) {
                                            <label
                                                animate.enter="slide-down-error" animate.leave="slide-up-error"
                                                class="form-validation-alert"
                                                i18n="Manuf detail|Name required error@@manufDetailNameRequiredError">
                                                Name is required!
                                            </label>
                                        }
                                        @if (hasError("name", ["minlength", "maxlength"])) {
                                            <label
                                                animate.enter="slide-down-error" animate.leave="slide-up-error"
                                                class="form-validation-alert"
                                                i18n="Manuf detail|Name length error@@manufDetailNameLengthError">
                                                Name length must be between 2 and 200!
                                            </label>
                                        }
                                        @if (hasError("name", ["unique"])) {
                                            <label
                                                animate.enter="slide-down-error" animate.leave="slide-up-error"
                                                class="form-validation-alert"
                                                i18n="Manuf detail|Name unique error@@manufDetailNameUniqueError">
                                                Name should be unique!
                                            </label>
                                        }
                                    }
                                }
                            </span>
                        </li>
                    </ol>
                </fieldset>
            </div>
        </form>
    }
</div>
